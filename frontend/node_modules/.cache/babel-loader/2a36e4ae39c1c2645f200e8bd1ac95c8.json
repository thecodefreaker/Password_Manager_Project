{"remainingRequest":"/home/kaliuser/test/vaults/frontend/node_modules/babel-loader/lib/index.js!/home/kaliuser/test/vaults/frontend/node_modules/eslint-loader/index.js??ref--14-0!/home/kaliuser/test/vaults/frontend/src/services/api/authentication.js","dependencies":[{"path":"/home/kaliuser/test/vaults/frontend/src/services/api/authentication.js","mtime":1713871927302},{"path":"/home/kaliuser/test/vaults/frontend/babel.config.js","mtime":1713871927298},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUva2FsaXVzZXIvdGVzdC92YXVsdHMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9rYWxpdXNlci90ZXN0L3ZhdWx0cy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGh0dHAgZnJvbSAiLi4vaHR0cCI7CmltcG9ydCB7IFNlY3VyaXR5IH0gZnJvbSAiLi4vLi4vcGx1Z2lucy9TZWN1cml0eSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vLi4vcm91dGVyIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uLy4uL3N0b3JlIjsKaW1wb3J0IG1peGlucyBmcm9tICIuLi8uLi9wbHVnaW5zL21peGlucyI7CmV4cG9ydCBkZWZhdWx0IHsKICBlbmRwb2ludHM6IHsKICAgIEFQSTogIi9hdXRoZW50aWNhdGlvbiIsCiAgICBSRUdJU1RFUjogZnVuY3Rpb24gUkVHSVNURVIoKSB7CiAgICAgIHJldHVybiB0aGlzLkFQSSArICIvcmVnaXN0ZXIiOwogICAgfSwKICAgIExPR0lOOiBmdW5jdGlvbiBMT0dJTigpIHsKICAgICAgcmV0dXJuIHRoaXMuQVBJICsgIi9sb2dpbiI7CiAgICB9LAogICAgTE9HT1VUOiBmdW5jdGlvbiBMT0dPVVQoKSB7CiAgICAgIHJldHVybiB0aGlzLkFQSSArICIvbG9nb3V0IjsKICAgIH0KICB9LAogIHN0b3JlOiBzdG9yZSwKICByb3V0ZXI6IHJvdXRlciwKICBzZWN1cml0eTogbmV3IFNlY3VyaXR5KCksCiAgaXNPYmplY3RFbXB0eTogbWl4aW5zLm1ldGhvZHMuaXNPYmplY3RFbXB0eSwKCiAgLyoqCiAgICogVGhlIG1haW4gcmVnaXN0cmF0aW9uIG1ldGhvZC4KICAgKgogICAqIEBwYXJhbSB2YWx1ZXMKICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBeGlvc1Jlc3BvbnNlPGFueT58Knx1bmRlZmluZWQ+fQogICAqLwogIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3Rlcih2YWx1ZXMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBzZWxmLCBpbml0LCBoYW5kbGVyLCByZXNldE1hc3RlclBhc3N3b3JkLCBjcmVhdGVNYXN0ZXJQYXNzd29yZEFycmF5LCByZWdpc3RlcjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZWxmID0gX3RoaXM7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogSW5pdGlhbGl6ZXMgdGhlIHByb2Nlc3MuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsdWVzCiAgICAgICAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8QXhpb3NSZXNwb25zZTxhbnk+fCo+fQogICAgICAgICAgICAgICAqLwoKICAgICAgICAgICAgICBpbml0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHZhbHVlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIodmFsdWVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA2XV0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBpbml0KF94KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBDcmVhdGVzIHRoZSBlbmNyeXB0aW9uIGtleSBhbmQgYXV0aGVudGljYXRpb24gaGFzaCwgcGVyc2lzdHMgdGhlIGtleSwgc2V0cyB0aGUgcGFzc3dvcmQgdG8gdGhlIG5ldyB2YWx1ZSBhbmQgdHJpZ2dlcnMgdGhlIHJlcXVlc3QuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsdWVzCiAgICAgICAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8QXhpb3NSZXNwb25zZTxhbnk+Pn0KICAgICAgICAgICAgICAgKi8KCgogICAgICAgICAgICAgIGhhbmRsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMih2YWx1ZXMpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRlcml2ZWQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmRlcml2ZUZyb21NYXN0ZXJQYXNzd29yZCh2YWx1ZXMubWFzdGVyX3Bhc3N3b3JkLCB2YWx1ZXMuZW1haWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2ZWQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3RvcmUuZGlzcGF0Y2goInVzZXIvc2V0RW5jcnlwdGlvbktleSIsIGRlcml2ZWQuZW5jcnlwdGlvbktleSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gcmVzZXRNYXN0ZXJQYXNzd29yZCh2YWx1ZXMsIGRlcml2ZWQuYXV0aGVudGljYXRpb25IYXNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBjcmVhdGVNYXN0ZXJQYXNzd29yZEFycmF5KHZhbHVlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3Rlcih2YWx1ZXMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyKF94MikgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIFNldHMgdGhlIHBhc3N3b3JkICYgcGFzc3dvcmQgY29uZmlybWF0aW9uIHRvIHRoZSBhdXRoZW50aWNhdGlvbiBoYXNoLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlcwogICAgICAgICAgICAgICAqIEBwYXJhbSBhdXRoZW50aWNhdGlvbkhhc2gKICAgICAgICAgICAgICAgKi8KCgogICAgICAgICAgICAgIHJlc2V0TWFzdGVyUGFzc3dvcmQgPSBmdW5jdGlvbiByZXNldE1hc3RlclBhc3N3b3JkKHZhbHVlcywgYXV0aGVudGljYXRpb25IYXNoKSB7CiAgICAgICAgICAgICAgICB2YWx1ZXMubWFzdGVyX3Bhc3N3b3JkID0gYXV0aGVudGljYXRpb25IYXNoLnRvU3RyaW5nKCJoZXgiKTsKICAgICAgICAgICAgICAgIHZhbHVlcy5tYXN0ZXJfcGFzc3dvcmRfY29uZmlybWF0aW9uID0gYXV0aGVudGljYXRpb25IYXNoLnRvU3RyaW5nKCJoZXgiKTsKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBDcmVhdGUgYSAibWFzdGVyX3Bhc3N3b3JkIiBhcnJheSBzaW5jZSB0aGUgcGFzc3dvcmQgZmllbGQgaW4gdGhlIGJhY2tlbmQgaXMgYSB0eXBlIG9mICJSZXBlYXRlZFR5cGUiLAogICAgICAgICAgICAgICAqIGluIHdoaWNoIHRoZSB0d28gZmllbGRzIGFyZSBjaGlsZHJlbiBvZiB0aGUgcGFzc3dvcmQgZmllbGQuIEluIHRoZSBlbmQgZGVsZXRpbmcgdGhlIHJlbWFpbmluZyAibWFzdGVyX3Bhc3N3b3JkX2NvbmZpcm1hdGlvbiIuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsdWVzCiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICBjcmVhdGVNYXN0ZXJQYXNzd29yZEFycmF5ID0gZnVuY3Rpb24gY3JlYXRlTWFzdGVyUGFzc3dvcmRBcnJheSh2YWx1ZXMpIHsKICAgICAgICAgICAgICAgIHZhbHVlcy5tYXN0ZXJfcGFzc3dvcmQgPSB7CiAgICAgICAgICAgICAgICAgICJwYXNzd29yZCI6IHZhbHVlcy5tYXN0ZXJfcGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICJwYXNzd29yZF9jb25maXJtYXRpb24iOiB2YWx1ZXMubWFzdGVyX3Bhc3N3b3JkX2NvbmZpcm1hdGlvbgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZXMubWFzdGVyX3Bhc3N3b3JkX2NvbmZpcm1hdGlvbjsKICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBNYWtlcyB0aGUgcmVxdWVzdCB0byByZWdpc3RlciBhbiBlbmQtdXNlci4KICAgICAgICAgICAgICAgKi8KCgogICAgICAgICAgICAgIHJlZ2lzdGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTModmFsdWVzKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1cmw7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gc2VsZi5lbmRwb2ludHMuUkVHSVNURVIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiB2YWx1ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiByZWdpc3RlcihfeDMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBpbml0KHZhbHVlcyk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSgpOwogIH0sCgogIC8qKgogICAqIFRoZSBtYWluIGxvZ2luIG1ldGhvZC4KICAgKgogICAqIEBwYXJhbSB2YWx1ZXMKICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkfCp8dW5kZWZpbmVkPn0KICAgKi8KICBsb2dpbjogZnVuY3Rpb24gbG9naW4odmFsdWVzKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgdmFyIHNlbGYsIGluaXQsIGhhbmRsZXIsIGxvZ2luLCBzdWNjZXNzSGFuZGxlcjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZWxmID0gX3RoaXMyOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIEluaXRpYWxpemVzIHRoZSBwcm9jZXNzLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlcwogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWR8Kj59CiAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgIGluaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNSh2YWx1ZXMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyKHZhbHVlcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NS5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gX2NvbnRleHQ1WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDUudDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTUsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gaW5pdChfeDQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBDcmVhdGVzIHRoZSBlbmNyeXB0aW9uIGtleSBhbmQgYXV0aGVudGljYXRpb24gaGFzaCwgcGVyc2lzdHMgdGhlIGtleSwgc2V0cyB0aGUgcGFzc3dvcmQgdG8gdGhlIG5ldyB2YWx1ZSBhbmQgdHJpZ2dlcnMgdGhlIHJlcXVlc3QuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsdWVzCiAgICAgICAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59CiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICBoYW5kbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYodmFsdWVzKSB7CiAgICAgICAgICAgICAgICAgIHZhciBoYXNoZXM7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmRlcml2ZUZyb21NYXN0ZXJQYXNzd29yZCh2YWx1ZXMubG9naW5fbWFzdGVyX3Bhc3N3b3JkLCB2YWx1ZXMubG9naW5fZW1haWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hlcyA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdG9yZS5kaXNwYXRjaCgidXNlci9zZXRFbmNyeXB0aW9uS2V5IiwgaGFzaGVzLmVuY3J5cHRpb25LZXkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5sb2dpbl9tYXN0ZXJfcGFzc3dvcmQgPSBoYXNoZXMuYXV0aGVudGljYXRpb25IYXNoLnRvU3RyaW5nKCJoZXgiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2luKHZhbHVlcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Ni5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlcihfeDUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBNYWtlcyB0aGUgcmVxdWVzdCB0byBsb2dpbiBhbiBlbmQtdXNlci4KICAgICAgICAgICAgICAgKi8KCgogICAgICAgICAgICAgIGxvZ2luID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcodmFsdWVzKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1cmwsIHJlc3BvbnNlOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHNlbGYuZW5kcG9pbnRzLkxPR0lOKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBodHRwLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3NIYW5kbGVyKHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ3LnNlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBsb2dpbihfeDYpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgc3VjY2Vzc0hhbmRsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY3ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlOChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB2YXIgdXNlcjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gcmVzcG9uc2UuZGF0YS51c2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIgPSBKU09OLnBhcnNlKHVzZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuaXNPYmplY3RFbXB0eShzZWxmLnN0b3JlLmdldHRlcnNbInVzZXIvZ2V0VXNlciJdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3RvcmUuZGlzcGF0Y2goInVzZXIvc2V0VXNlciIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpZCI6IHVzZXIuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZmlyc3ROYW1lIjogdXNlci5maXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAibGFzdE5hbWUiOiB1c2VyLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImVtYWlsIjogdXNlci5lbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1c2VybmFtZSI6IHVzZXIudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicm9sZXMiOiB1c2VyLnJvbGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlZ2lzdGVyZWRBdCI6IHVzZXIucmVnaXN0ZXJlZEF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Y2Nlc3NIYW5kbGVyKF94NykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXQodmFsdWVzKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTkpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogVGhlIG1haW4gbG9nb3V0IG1ldGhvZC4KICAgKgogICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWR8Knx1bmRlZmluZWQ+fQogICAqLwogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkgewogICAgICB2YXIgc2VsZiwgaW5pdCwgbG9nb3V0LCBzdWNjZXNzSGFuZGxlciwgZXJhc2VMb2NhbERhdGE7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNlbGYgPSBfdGhpczM7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogSW5pdGlhbGl6ZXMgdGhlIHByb2Nlc3MuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkfCo+fQogICAgICAgICAgICAgICAqLwoKICAgICAgICAgICAgICBpbml0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ291dCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMC5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMC50MCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEwLCBudWxsLCBbWzAsIDZdXSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogTWFrZXMgdGhlIHJlcXVlc3QgdG8gbG9nb3V0IGFuIGVuZC11c2VyLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59CiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICBsb2dvdXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1cmwsIHJlc3BvbnNlOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBzZWxmLmVuZHBvaW50cy5MT0dPVVQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBodHRwLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2Vzc0hhbmRsZXIocmVzcG9uc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMS5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogRGVsZXRlcyB0aGUgdXNlciBkYXRhIGZyb20gdGhlIHN0b3JlLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIHJlc3BvbnNlCiAgICAgICAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59CiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICBzdWNjZXNzSGFuZGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjEwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnJvdXRlci5wdXNoKCIvbG9naW4iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcmFzZUxvY2FsRGF0YSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Y2Nlc3NIYW5kbGVyKF94OCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjEwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgZXJhc2VMb2NhbERhdGEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYxMSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN0b3JlLmRpc3BhdGNoKCJ1c2VyL3NldEVuY3J5cHRpb25LZXkiLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdG9yZS5kaXNwYXRjaCgidXNlci9zZXRHZW5lcmF0ZWRQYXNzd29yZCIsICIiKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc09iamVjdEVtcHR5KHNlbGYuc3RvcmUuZ2V0dGVyc1sidXNlci9nZXRVc2VyIl0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN0b3JlLmRpc3BhdGNoKCJ1c2VyL3NldFVzZXIiLCB7fSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNPYmplY3RFbXB0eShzZWxmLnN0b3JlLmdldHRlcnNbInVzZXIvZ2V0VmF1bHRzIl0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3RvcmUuZGlzcGF0Y2goInVzZXIvc2V0VmF1bHRzIiwgW10pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc09iamVjdEVtcHR5KHNlbGYuc3RvcmUuZ2V0dGVyc1sidXNlci9nZXRJdGVtcyJdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN0b3JlLmRpc3BhdGNoKCJ1c2VyL3NldEl0ZW1zIiwgW10pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5pc09iamVjdEVtcHR5KHNlbGYuc3RvcmUuZ2V0dGVyc1sidXNlci9nZXRDYXRlZ29yaWVzIl0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3RvcmUuZGlzcGF0Y2goInVzZXIvc2V0Q2F0ZWdvcmllcyIsIFtdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTEzKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZXJhc2VMb2NhbERhdGEoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBpbml0KCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDE0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBIYXNoIHRoZSBtYXN0ZXIgcGFzc3dvcmQgaW50byBhbiBlbmNyeXB0aW9uIGtleSBhbmQgYW4gYXV0aGVudGljYXRpb24gaGFzaC4KICAgKgogICAqIEBwYXJhbSBtYXN0ZXJQYXNzd29yZAogICAqIEBwYXJhbSBlbWFpbAogICAqIEByZXR1cm5zIE9iamVjdAogICAqLwogIGRlcml2ZUZyb21NYXN0ZXJQYXNzd29yZDogZnVuY3Rpb24gZGVyaXZlRnJvbU1hc3RlclBhc3N3b3JkKG1hc3RlclBhc3N3b3JkLCBlbWFpbCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICB2YXIgZW5jcnlwdGlvbktleSwgYXV0aGVudGljYXRpb25IYXNoOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczQuc2VjdXJpdHkuaGFzaChtYXN0ZXJQYXNzd29yZCwgZW1haWwsIDEwMDEwMCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgZW5jcnlwdGlvbktleSA9IF9jb250ZXh0MTUuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczQuc2VjdXJpdHkuaGFzaChtYXN0ZXJQYXNzd29yZCwgZW5jcnlwdGlvbktleSwgMSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25IYXNoID0gX2NvbnRleHQxNS5zZW50OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZW5jcnlwdGlvbktleTogZW5jcnlwdGlvbktleSwKICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uSGFzaDogYXV0aGVudGljYXRpb25IYXNoCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTE1KTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"names":["http","Security","router","store","mixins","endpoints","API","REGISTER","LOGIN","LOGOUT","security","isObjectEmpty","methods","register","values","self","init","handler","deriveFromMasterPassword","master_password","email","derived","dispatch","encryptionKey","resetMasterPassword","authenticationHash","createMasterPasswordArray","toString","master_password_confirmation","url","request","method","data","form","login","login_master_password","login_email","hashes","response","successHandler","user","JSON","parse","getters","id","firstName","lastName","username","roles","registeredAt","logout","status","push","eraseLocalData","masterPassword","hash"],"sources":["/home/kaliuser/test/vaults/frontend/src/services/api/authentication.js"],"sourcesContent":["import http from \"../http\";\nimport {Security} from \"../../plugins/Security\";\nimport router from \"../../router\";\nimport store from \"../../store\";\nimport mixins from \"../../plugins/mixins\";\n\nexport default {\n    endpoints: {\n        API: \"/authentication\",\n        REGISTER() {\n            return this.API + \"/register\"\n        },\n        LOGIN() {\n            return this.API + \"/login\"\n        },\n        LOGOUT() {\n            return this.API + \"/logout\"\n        }\n    },\n\n    store,\n\n    router,\n\n    security: new Security(),\n\n    isObjectEmpty: mixins.methods.isObjectEmpty,\n\n    /**\n     * The main registration method.\n     *\n     * @param values\n     * @returns {Promise<AxiosResponse<any>|*|undefined>}\n     */\n    async register(values) {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @param values\n         * @returns {Promise<AxiosResponse<any>|*>}\n         */\n        const init = async function(values) {\n            try {\n                return await handler(values);\n            } catch(error) {\n                return error;\n            }\n        };\n\n        /**\n         * Creates the encryption key and authentication hash, persists the key, sets the password to the new value and triggers the request.\n         *\n         * @param values\n         * @returns {Promise<AxiosResponse<any>>}\n         */\n        const handler = async function(values) {\n            let derived = await self.deriveFromMasterPassword(values.master_password, values.email);\n\n            await self.store.dispatch(\"user/setEncryptionKey\", derived.encryptionKey);\n\n            values = resetMasterPassword(values, derived.authenticationHash);\n\n            values = createMasterPasswordArray(values);\n\n            return await register(values);\n        };\n\n        /**\n         * Sets the password & password confirmation to the authentication hash.\n         *\n         * @param values\n         * @param authenticationHash\n         */\n        const resetMasterPassword = function(values, authenticationHash) {\n            values.master_password = authenticationHash.toString(\"hex\");\n            values.master_password_confirmation = authenticationHash.toString(\"hex\")\n\n            return values;\n        };\n\n        /**\n         * Create a \"master_password\" array since the password field in the backend is a type of \"RepeatedType\",\n         * in which the two fields are children of the password field. In the end deleting the remaining \"master_password_confirmation\".\n         *\n         * @param values\n         */\n        const createMasterPasswordArray = function(values) {\n            values.master_password = {\n                \"password\": values.master_password,\n                \"password_confirmation\": values.master_password_confirmation\n            };\n\n            delete values.master_password_confirmation;\n\n            return values;\n        };\n\n        /**\n         * Makes the request to register an end-user.\n         */\n        const register = async function(values) {\n            let url = self.endpoints.REGISTER();\n\n            return await http.request({\n                method: \"post\",\n                url: url,\n                data: {\n                    form: values\n                }\n            });\n        };\n\n        return await init(values);\n    },\n\n    /**\n     * The main login method.\n     *\n     * @param values\n     * @returns {Promise<void|*|undefined>}\n     */\n    async login(values) {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @param values\n         * @returns {Promise<void|*>}\n         */\n        const init = async function(values) {\n            try {\n                return await handler(values);\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Creates the encryption key and authentication hash, persists the key, sets the password to the new value and triggers the request.\n         *\n         * @param values\n         * @returns {Promise<void>}\n         */\n        const handler = async function(values) {\n            let hashes = await self.deriveFromMasterPassword(values.login_master_password, values.login_email);\n\n            await self.store.dispatch(\"user/setEncryptionKey\", hashes.encryptionKey);\n\n            values.login_master_password = hashes.authenticationHash.toString(\"hex\");\n\n            return await login(values);\n        };\n\n        /**\n         * Makes the request to login an end-user.\n         */\n        const login = async function(values) {\n            let url = self.endpoints.LOGIN();\n\n            let response = await http.request({\n                method: \"post\",\n                url: url,\n                data: {\n                    form: values\n                }\n            });\n\n            return await successHandler(response);\n        };\n\n        const successHandler = async function(response) {\n            let user = response.data.user;\n            user = JSON.parse(user);\n\n            if (self.isObjectEmpty(self.store.getters[\"user/getUser\"])) {\n                await self.store.dispatch(\"user/setUser\", {\n                    \"id\": user.id,\n                    \"firstName\": user.firstName,\n                    \"lastName\": user.lastName,\n                    \"email\": user.email,\n                    \"username\": user.username,\n                    \"roles\": user.roles,\n                    \"registeredAt\": user.registeredAt\n                })\n            }\n        }\n\n        return await init(values);\n\n    },\n\n    /**\n     * The main logout method.\n     *\n     * @returns {Promise<void|*|undefined>}\n     */\n    async logout() {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @returns {Promise<void|*>}\n         */\n        const init = async function() {\n            try {\n                return await logout();\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Makes the request to logout an end-user.\n         *\n         * @returns {Promise<void>}\n         */\n        const logout = async function() {\n            let url = self.endpoints.LOGOUT();\n\n            let response = await http.request({\n                method: \"get\",\n                url: url\n            });\n\n            return await successHandler(response);\n        };\n\n        /**\n         * Deletes the user data from the store.\n         *\n         * @param response\n         * @returns {Promise<void>}\n         */\n        const successHandler = async function(response) {\n            if (response.status === 204) {\n                await self.router.push(\"/login\");\n                await eraseLocalData();\n            }\n        };\n\n        const eraseLocalData = async function() {\n            await self.store.dispatch(\"user/setEncryptionKey\", {});\n\n            await self.store.dispatch(\"user/setGeneratedPassword\", \"\");\n\n            if (!self.isObjectEmpty(self.store.getters[\"user/getUser\"])) {\n                await self.store.dispatch(\"user/setUser\", {});\n            }\n\n            if (!self.isObjectEmpty(self.store.getters[\"user/getVaults\"])) {\n                await self.store.dispatch(\"user/setVaults\", []);\n            }\n\n            if (!self.isObjectEmpty(self.store.getters[\"user/getItems\"])) {\n                await self.store.dispatch(\"user/setItems\", []);\n            }\n\n            if (!self.isObjectEmpty(self.store.getters[\"user/getCategories\"])) {\n                await self.store.dispatch(\"user/setCategories\", []);\n            }\n        };\n\n        return await init();\n    },\n\n    /**\n     * Hash the master password into an encryption key and an authentication hash.\n     *\n     * @param masterPassword\n     * @param email\n     * @returns Object\n     */\n    async deriveFromMasterPassword(masterPassword, email) {\n        let encryptionKey = await this.security.hash(masterPassword, email, 100100);\n        let authenticationHash = await this.security.hash(masterPassword, encryptionKey, 1);\n\n        return {\n            encryptionKey,\n            authenticationHash\n        };\n    }\n}\n"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,SAAjB;AACA,SAAQC,QAAR,QAAuB,wBAAvB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAEA,eAAe;EACXC,SAAS,EAAE;IACPC,GAAG,EAAE,iBADE;IAEPC,QAFO,sBAEI;MACP,OAAO,KAAKD,GAAL,GAAW,WAAlB;IACH,CAJM;IAKPE,KALO,mBAKC;MACJ,OAAO,KAAKF,GAAL,GAAW,QAAlB;IACH,CAPM;IAQPG,MARO,oBAQE;MACL,OAAO,KAAKH,GAAL,GAAW,SAAlB;IACH;EAVM,CADA;EAcXH,KAAK,EAALA,KAdW;EAgBXD,MAAM,EAANA,MAhBW;EAkBXQ,QAAQ,EAAE,IAAIT,QAAJ,EAlBC;EAoBXU,aAAa,EAAEP,MAAM,CAACQ,OAAP,CAAeD,aApBnB;;EAsBX;AACJ;AACA;AACA;AACA;AACA;EACUE,QA5BK,oBA4BIC,MA5BJ,EA4BY;IAAA;;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACfC,IADe,GACR,KADQ;cAGnB;AACR;AACA;AACA;AACA;AACA;;cACcC,IATa;gBAAA,sEASN,iBAAeF,MAAf;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA;0BAAA,OAEQG,OAAO,CAACH,MAAD,CAFf;;wBAAA;0BAAA;;wBAAA;0BAAA;0BAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CATM;;gBAAA,gBASbE,IATa;kBAAA;gBAAA;cAAA;cAiBnB;AACR;AACA;AACA;AACA;AACA;;;cACcC,OAvBa;gBAAA,uEAuBH,kBAAeH,MAAf;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA,OACQC,IAAI,CAACG,wBAAL,CAA8BJ,MAAM,CAACK,eAArC,EAAsDL,MAAM,CAACM,KAA7D,CADR;;wBAAA;0BACRC,OADQ;0BAAA;0BAAA,OAGNN,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,uBAApB,EAA6CD,OAAO,CAACE,aAArD,CAHM;;wBAAA;0BAKZT,MAAM,GAAGU,mBAAmB,CAACV,MAAD,EAASO,OAAO,CAACI,kBAAjB,CAA5B;0BAEAX,MAAM,GAAGY,yBAAyB,CAACZ,MAAD,CAAlC;0BAPY;0BAAA,OASCD,QAAQ,CAACC,MAAD,CATT;;wBAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CAvBG;;gBAAA,gBAuBbG,OAvBa;kBAAA;gBAAA;cAAA;cAmCnB;AACR;AACA;AACA;AACA;AACA;;;cACcO,mBAzCa,GAyCS,SAAtBA,mBAAsB,CAASV,MAAT,EAAiBW,kBAAjB,EAAqC;gBAC7DX,MAAM,CAACK,eAAP,GAAyBM,kBAAkB,CAACE,QAAnB,CAA4B,KAA5B,CAAzB;gBACAb,MAAM,CAACc,4BAAP,GAAsCH,kBAAkB,CAACE,QAAnB,CAA4B,KAA5B,CAAtC;gBAEA,OAAOb,MAAP;cACH,CA9CkB;cAgDnB;AACR;AACA;AACA;AACA;AACA;;;cACcY,yBAtDa,GAsDe,SAA5BA,yBAA4B,CAASZ,MAAT,EAAiB;gBAC/CA,MAAM,CAACK,eAAP,GAAyB;kBACrB,YAAYL,MAAM,CAACK,eADE;kBAErB,yBAAyBL,MAAM,CAACc;gBAFX,CAAzB;gBAKA,OAAOd,MAAM,CAACc,4BAAd;gBAEA,OAAOd,MAAP;cACH,CA/DkB;cAiEnB;AACR;AACA;;;cACcD,QApEa;gBAAA,uEAoEF,kBAAeC,MAAf;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACTe,GADS,GACHd,IAAI,CAACV,SAAL,CAAeE,QAAf,EADG;0BAAA;0BAAA,OAGAP,IAAI,CAAC8B,OAAL,CAAa;4BACtBC,MAAM,EAAE,MADc;4BAEtBF,GAAG,EAAEA,GAFiB;4BAGtBG,IAAI,EAAE;8BACFC,IAAI,EAAEnB;4BADJ;0BAHgB,CAAb,CAHA;;wBAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CApEE;;gBAAA,gBAoEbD,QApEa;kBAAA;gBAAA;cAAA;;cAAA;cAAA,OAgFNG,IAAI,CAACF,MAAD,CAhFE;;YAAA;cAAA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAiFtB,CA7GU;;EA+GX;AACJ;AACA;AACA;AACA;AACA;EACUoB,KArHK,iBAqHCpB,MArHD,EAqHS;IAAA;;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACZC,IADY,GACL,MADK;cAGhB;AACR;AACA;AACA;AACA;AACA;;cACcC,IATU;gBAAA,uEASH,kBAAeF,MAAf;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA;0BAAA,OAEQG,OAAO,CAACH,MAAD,CAFf;;wBAAA;0BAAA;;wBAAA;0BAAA;0BAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CATG;;gBAAA,gBASVE,IATU;kBAAA;gBAAA;cAAA;cAiBhB;AACR;AACA;AACA;AACA;AACA;;;cACcC,OAvBU;gBAAA,uEAuBA,kBAAeH,MAAf;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA,OACOC,IAAI,CAACG,wBAAL,CAA8BJ,MAAM,CAACqB,qBAArC,EAA4DrB,MAAM,CAACsB,WAAnE,CADP;;wBAAA;0BACRC,MADQ;0BAAA;0BAAA,OAGNtB,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,uBAApB,EAA6Ce,MAAM,CAACd,aAApD,CAHM;;wBAAA;0BAKZT,MAAM,CAACqB,qBAAP,GAA+BE,MAAM,CAACZ,kBAAP,CAA0BE,QAA1B,CAAmC,KAAnC,CAA/B;0BALY;0BAAA,OAOCO,KAAK,CAACpB,MAAD,CAPN;;wBAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CAvBA;;gBAAA,gBAuBVG,OAvBU;kBAAA;gBAAA;cAAA;cAiChB;AACR;AACA;;;cACciB,KApCU;gBAAA,uEAoCF,kBAAepB,MAAf;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACNe,GADM,GACAd,IAAI,CAACV,SAAL,CAAeG,KAAf,EADA;0BAAA;0BAAA,OAGWR,IAAI,CAAC8B,OAAL,CAAa;4BAC9BC,MAAM,EAAE,MADsB;4BAE9BF,GAAG,EAAEA,GAFyB;4BAG9BG,IAAI,EAAE;8BACFC,IAAI,EAAEnB;4BADJ;0BAHwB,CAAb,CAHX;;wBAAA;0BAGNwB,QAHM;0BAAA;0BAAA,OAWGC,cAAc,CAACD,QAAD,CAXjB;;wBAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CApCE;;gBAAA,gBAoCVJ,KApCU;kBAAA;gBAAA;cAAA;;cAkDVK,cAlDU;gBAAA,uEAkDO,kBAAeD,QAAf;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACfE,IADe,GACRF,QAAQ,CAACN,IAAT,CAAcQ,IADN;0BAEnBA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP;;0BAFmB,KAIfzB,IAAI,CAACJ,aAAL,CAAmBI,IAAI,CAACZ,KAAL,CAAWwC,OAAX,CAAmB,cAAnB,CAAnB,CAJe;4BAAA;4BAAA;0BAAA;;0BAAA;0BAAA,OAKT5B,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,cAApB,EAAoC;4BACtC,MAAMkB,IAAI,CAACI,EAD2B;4BAEtC,aAAaJ,IAAI,CAACK,SAFoB;4BAGtC,YAAYL,IAAI,CAACM,QAHqB;4BAItC,SAASN,IAAI,CAACpB,KAJwB;4BAKtC,YAAYoB,IAAI,CAACO,QALqB;4BAMtC,SAASP,IAAI,CAACQ,KANwB;4BAOtC,gBAAgBR,IAAI,CAACS;0BAPiB,CAApC,CALS;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CAlDP;;gBAAA,gBAkDVV,cAlDU;kBAAA;gBAAA;cAAA;;cAAA;cAAA,OAmEHvB,IAAI,CAACF,MAAD,CAnED;;YAAA;cAAA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAqEnB,CA1LU;;EA4LX;AACJ;AACA;AACA;AACA;EACUoC,MAjMK,oBAiMI;IAAA;;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACPnC,IADO,GACA,MADA;cAGX;AACR;AACA;AACA;AACA;;cACcC,IARK;gBAAA,uEAQE;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA;0BAAA,OAEQkC,MAAM,EAFd;;wBAAA;0BAAA;;wBAAA;0BAAA;0BAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CARF;;gBAAA,gBAQLlC,IARK;kBAAA;gBAAA;cAAA;cAgBX;AACR;AACA;AACA;AACA;;;cACckC,MArBK;gBAAA,uEAqBI;kBAAA;kBAAA;oBAAA;sBAAA;wBAAA;0BACPrB,GADO,GACDd,IAAI,CAACV,SAAL,CAAeI,MAAf,EADC;0BAAA;0BAAA,OAGUT,IAAI,CAAC8B,OAAL,CAAa;4BAC9BC,MAAM,EAAE,KADsB;4BAE9BF,GAAG,EAAEA;0BAFyB,CAAb,CAHV;;wBAAA;0BAGPS,QAHO;0BAAA;0BAAA,OAQEC,cAAc,CAACD,QAAD,CARhB;;wBAAA;0BAAA;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CArBJ;;gBAAA,gBAqBLY,MArBK;kBAAA;gBAAA;cAAA;cAgCX;AACR;AACA;AACA;AACA;AACA;;;cACcX,cAtCK;gBAAA,wEAsCY,mBAAeD,QAAf;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA,MACfA,QAAQ,CAACa,MAAT,KAAoB,GADL;4BAAA;4BAAA;0BAAA;;0BAAA;0BAAA,OAETpC,IAAI,CAACb,MAAL,CAAYkD,IAAZ,CAAiB,QAAjB,CAFS;;wBAAA;0BAAA;0BAAA,OAGTC,cAAc,EAHL;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CAtCZ;;gBAAA,gBAsCLd,cAtCK;kBAAA;gBAAA;cAAA;;cA6CLc,cA7CK;gBAAA,wEA6CY;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA,OACbtC,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,uBAApB,EAA6C,EAA7C,CADa;;wBAAA;0BAAA;0BAAA,OAGbP,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,2BAApB,EAAiD,EAAjD,CAHa;;wBAAA;0BAAA,IAKdP,IAAI,CAACJ,aAAL,CAAmBI,IAAI,CAACZ,KAAL,CAAWwC,OAAX,CAAmB,cAAnB,CAAnB,CALc;4BAAA;4BAAA;0BAAA;;0BAAA;0BAAA,OAMT5B,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,cAApB,EAAoC,EAApC,CANS;;wBAAA;0BAAA,IASdP,IAAI,CAACJ,aAAL,CAAmBI,IAAI,CAACZ,KAAL,CAAWwC,OAAX,CAAmB,gBAAnB,CAAnB,CATc;4BAAA;4BAAA;0BAAA;;0BAAA;0BAAA,OAUT5B,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,gBAApB,EAAsC,EAAtC,CAVS;;wBAAA;0BAAA,IAadP,IAAI,CAACJ,aAAL,CAAmBI,IAAI,CAACZ,KAAL,CAAWwC,OAAX,CAAmB,eAAnB,CAAnB,CAbc;4BAAA;4BAAA;0BAAA;;0BAAA;0BAAA,OAcT5B,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,eAApB,EAAqC,EAArC,CAdS;;wBAAA;0BAAA,IAiBdP,IAAI,CAACJ,aAAL,CAAmBI,IAAI,CAACZ,KAAL,CAAWwC,OAAX,CAAmB,oBAAnB,CAAnB,CAjBc;4BAAA;4BAAA;0BAAA;;0BAAA;0BAAA,OAkBT5B,IAAI,CAACZ,KAAL,CAAWmB,QAAX,CAAoB,oBAApB,EAA0C,EAA1C,CAlBS;;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CA7CZ;;gBAAA,gBA6CL+B,cA7CK;kBAAA;gBAAA;cAAA;;cAAA;cAAA,OAmEErC,IAAI,EAnEN;;YAAA;cAAA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAoEd,CArQU;;EAuQX;AACJ;AACA;AACA;AACA;AACA;AACA;EACUE,wBA9QK,oCA8QoBoC,cA9QpB,EA8QoClC,KA9QpC,EA8Q2C;IAAA;;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACxB,MAAI,CAACV,QAAL,CAAc6C,IAAd,CAAmBD,cAAnB,EAAmClC,KAAnC,EAA0C,MAA1C,CADwB;;YAAA;cAC9CG,aAD8C;cAAA;cAAA,OAEnB,MAAI,CAACb,QAAL,CAAc6C,IAAd,CAAmBD,cAAnB,EAAmC/B,aAAnC,EAAkD,CAAlD,CAFmB;;YAAA;cAE9CE,kBAF8C;cAAA,mCAI3C;gBACHF,aAAa,EAAbA,aADG;gBAEHE,kBAAkB,EAAlBA;cAFG,CAJ2C;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAQrD;AAtRU,CAAf"}]}