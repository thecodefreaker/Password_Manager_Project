{"remainingRequest":"/home/kaliuser/New Folder/test/vaults/frontend/node_modules/babel-loader/lib/index.js!/home/kaliuser/New Folder/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/kaliuser/New Folder/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/kaliuser/New Folder/test/vaults/frontend/src/views/Vaults/EditVault.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/kaliuser/New Folder/test/vaults/frontend/src/views/Vaults/EditVault.vue","mtime":1713871927302},{"path":"/home/kaliuser/New Folder/test/vaults/frontend/babel.config.js","mtime":1713871927298},{"path":"/home/kaliuser/New Folder/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/New Folder/test/vaults/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kaliuser/New Folder/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/New Folder/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUva2FsaXVzZXIvTmV3IEZvbGRlci90ZXN0L3ZhdWx0cy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2thbGl1c2VyL05ldyBGb2xkZXIvdGVzdC92YXVsdHMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CmltcG9ydCB7IGFwaSB9IGZyb20gIi4uLy4uL3NlcnZpY2VzL2FwaSI7CmltcG9ydCBEZWxldGVQcm9tcHQgZnJvbSAiLi4vLi4vY29tcG9uZW50cy9EZWxldGVQcm9tcHQiOwppbXBvcnQgKiBhcyBWZWVWYWxpZGF0ZSBmcm9tICJ2ZWUtdmFsaWRhdGUiOwppbXBvcnQgKiBhcyB5dXAgZnJvbSAieXVwIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDcmVhdGVWYXVsdCIsCiAgY29tcG9uZW50czogewogICAgLy8gUmVuYW1lIHRoZSBjb21wb25lbnRzIGZyb20gVmVlVmFsaWRhdGUgc28gdGhlcmUgbWF5IGJlIG5vIGNvbmZsaWN0cyB3aXRoIG5hdGl2ZSBIVE1MIGVsZW1lbnRzLgogICAgVmVlVmFsaWRhdGVGb3JtOiBWZWVWYWxpZGF0ZS5Gb3JtLAogICAgVmVlVmFsaWRhdGVGaWVsZDogVmVlVmFsaWRhdGUuRmllbGQsCiAgICBEZWxldGVQcm9tcHQ6IERlbGV0ZVByb21wdAogIH0sCiAgcHJvcHM6IFsidmF1bHRfbmFtZSIsICJ2YXVsdF9kZXNjcmlwdGlvbiJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiAiIiwKICAgICAgYmFja2VuZEVycm9yczogW10sCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIGRlbGV0ZVByb21wdFRleHQ6ICJZb3UgYXJlIGFib3V0IHRvIGRlbGV0ZSB0aGlzIHZhdWx0ICYgYWxsIGl0ZW1zIGluc2lkZSBpdC4gVGhpcyBjYW5ub3QgYmUgdW5kb25lLiBBcmUgeW91IGFic29sdXRlbHkgc3VyZT8iCiAgICB9OwogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgLyoqCiAgICAgKiBWYWxpZGF0aW9uIHJ1bGVzIHVzaW5nICd5dXAnLgogICAgICovCiAgICB2YXIgc2NoZW1hID0geXVwLm9iamVjdCh7CiAgICAgIHZhdWx0X25hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgpLmxhYmVsKCJWYXVsdCBOYW1lIiksCiAgICAgIHZhdWx0X2Rlc2NyaXB0aW9uOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoKS5sYWJlbCgiVmF1bHQgRGVzY3JpcHRpb24iKQogICAgfSk7CiAgICByZXR1cm4gewogICAgICBzY2hlbWE6IHNjaGVtYQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSB2YWx1ZXMKICAgICAqIEBwYXJhbSByZXNldEZvcm0KICAgICAqLwogICAgaGFuZGxlRm9ybTogZnVuY3Rpb24gaGFuZGxlRm9ybSh2YWx1ZXMsIF9yZWYpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc2V0Rm9ybSwgZW5jcnlwdGVkVmFsdWVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlc2V0Rm9ybSA9IF9yZWYucmVzZXRGb3JtOwogICAgICAgICAgICAgICAgZW5jcnlwdGVkVmFsdWVzID0gYXBpLnZhdWx0LmVuY3J5cHRWYXVsdCh2YWx1ZXMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlclZhdWx0VXBkYXRlKGVuY3J5cHRlZFZhbHVlcywgcmVzZXRGb3JtKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHRyaWdnZXJWYXVsdFVwZGF0ZTogZnVuY3Rpb24gdHJpZ2dlclZhdWx0VXBkYXRlKHZhbHVlcywgcmVzZXRGb3JtKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHZhdWx0SWQsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB2YXVsdElkID0gX3RoaXMyLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnZhdWx0LnVwZGF0ZSh2YXVsdElkLCB2YWx1ZXMpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5iYWNrZW5kRXJyb3JzLnB1c2gocmVzcG9uc2UucmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzZXRGb3JtKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHRyaWdnZXJWYXVsdERlbGV0ZTogZnVuY3Rpb24gdHJpZ2dlclZhdWx0RGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB2YXVsdElkLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdmF1bHRJZCA9IF90aGlzMy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS52YXVsdC5kZWxldGUodmF1bHRJZCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLmJhY2tlbmRFcnJvcnMucHVzaChyZXNwb25zZS5yZXNwb25zZS5kYXRhLmVycm9ycyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5zaG93TW9kYWwgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["api","DeletePrompt","VeeValidate","yup","name","components","VeeValidateForm","Form","VeeValidateField","Field","props","data","success","backendErrors","showModal","deletePromptText","setup","schema","object","vault_name","string","required","label","vault_description","methods","handleForm","values","resetForm","encryptedValues","vault","encryptVault","triggerVaultUpdate","vaultId","$route","params","id","update","response","Error","push","errors","$router","go","triggerVaultDelete","delete","status"],"sourceRoot":"","sources":["/home/kaliuser/New Folder/test/vaults/frontend/src/views/Vaults/EditVault.vue"],"sourcesContent":["<template>\n  <div class=\"overlay edit-vault\">\n    <button class=\"exit-overlay\" v-on:click=\"$router.go(-1)\">\n      &#10006;\n    </button>\n    <VeeValidateForm :validation-schema=\"schema\"\n                     :initial-values=\"{ vault_name: vault_name, vault_description: vault_description }\"\n                     v-slot=\"{ errors, handleSubmit }\" as=\"div\" class=\"form\">\n      <form @submit=\"handleSubmit($event, handleForm)\">\n        <h1>Edit your vault!</h1>\n        <label>\n          <span>Vault Name</span>\n          <VeeValidateField name=\"vault_name\" type=\"text\" />\n          <p class=\"form-error\">{{ errors.vault_name }}</p>\n        </label>\n\n        <label>\n          <span>Description</span>\n          <VeeValidateField name=\"vault_description\" as=\"textarea\" />\n          <p class=\"form-error\">{{ errors.vault_description }}</p>\n        </label>\n\n        <button class=\"btn\">Save changes</button>\n        <button type=\"button\" class=\"btn delete-vault-cta\" @click=\"showModal = true\">Delete vault</button>\n\n        <li class=\"backend-errors\" v-for=\"error in backendErrors\" :key=\"error\">\n          {{ error }}\n        </li>\n\n        <p class=\"backend-success\">{{ success }}</p>\n      </form>\n    </VeeValidateForm>\n    <transition name=\"modal\">\n      <DeletePrompt v-if=\"showModal\"\n                    :prompt-text=\"deletePromptText\"\n                    @deletionConfirmed=\"triggerVaultDelete\"\n                    @deletionCancelled=\"showModal = false\">\n      </DeletePrompt>\n    </transition>\n  </div>\n</template>\n\n<script>\n\nimport {api} from \"../../services/api\";\nimport DeletePrompt from \"../../components/DeletePrompt\";\nimport * as VeeValidate from \"vee-validate\";\nimport * as yup from \"yup\";\n\nexport default {\n  name: \"CreateVault\",\n  components: {\n    // Rename the components from VeeValidate so there may be no conflicts with native HTML elements.\n    VeeValidateForm: VeeValidate.Form,\n    VeeValidateField: VeeValidate.Field,\n    DeletePrompt\n  },\n  props: [\"vault_name\", \"vault_description\"],\n  data() {\n    return {\n      success: \"\",\n      backendErrors: [],\n      showModal: false,\n      deletePromptText: \"You are about to delete this vault & all items inside it. This cannot be undone. Are you absolutely sure?\"\n    }\n  },\n  setup() {\n    /**\n     * Validation rules using 'yup'.\n     */\n    const schema = yup.object({\n      vault_name: yup.string()\n          .required()\n          .label(\"Vault Name\"),\n      vault_description: yup.string()\n          .required()\n          .label(\"Vault Description\"),\n    });\n\n    return {\n      schema\n    };\n  },\n  methods: {\n    /**\n     *\n     * @param values\n     * @param resetForm\n     */\n    async handleForm(values, { resetForm }) {\n      let encryptedValues = api.vault.encryptVault(values);\n\n      await this.triggerVaultUpdate(encryptedValues, resetForm);\n    },\n    async triggerVaultUpdate(values, resetForm) {\n      let vaultId = this.$route.params.id;\n      let response = await api.vault.update(vaultId, values);\n\n      if (response instanceof Error) {\n        this.backendErrors.push(response.response.data.errors);\n      } else {\n        resetForm();\n\n        this.$router.go(-1);\n      }\n    },\n    async triggerVaultDelete() {\n      let vaultId = this.$route.params.id;\n      let response = await api.vault.delete(vaultId);\n\n      if (response instanceof Error) {\n        this.backendErrors.push(response.response.data.errors)\n      } else if (response.status === 204) {\n        this.showModal = false;\n\n        this.$router.go(-1);\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}