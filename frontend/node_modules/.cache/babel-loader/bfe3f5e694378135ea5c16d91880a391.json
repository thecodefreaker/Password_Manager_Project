{"remainingRequest":"/home/kaliuser/test/vaults/frontend/node_modules/babel-loader/lib/index.js!/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/kaliuser/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/kaliuser/test/vaults/frontend/src/views/Vaults/EditVault.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/kaliuser/test/vaults/frontend/src/views/Vaults/EditVault.vue","mtime":1713871927302},{"path":"/home/kaliuser/test/vaults/frontend/babel.config.js","mtime":1713871927298},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL2hvbWUva2FsaXVzZXIvdGVzdC92YXVsdHMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9rYWxpdXNlci90ZXN0L3ZhdWx0cy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0IHsgYXBpIH0gZnJvbSAiLi4vLi4vc2VydmljZXMvYXBpIjsKaW1wb3J0IERlbGV0ZVByb21wdCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0RlbGV0ZVByb21wdCI7CmltcG9ydCAqIGFzIFZlZVZhbGlkYXRlIGZyb20gInZlZS12YWxpZGF0ZSI7CmltcG9ydCAqIGFzIHl1cCBmcm9tICJ5dXAiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNyZWF0ZVZhdWx0IiwKICBjb21wb25lbnRzOiB7CiAgICAvLyBSZW5hbWUgdGhlIGNvbXBvbmVudHMgZnJvbSBWZWVWYWxpZGF0ZSBzbyB0aGVyZSBtYXkgYmUgbm8gY29uZmxpY3RzIHdpdGggbmF0aXZlIEhUTUwgZWxlbWVudHMuCiAgICBWZWVWYWxpZGF0ZUZvcm06IFZlZVZhbGlkYXRlLkZvcm0sCiAgICBWZWVWYWxpZGF0ZUZpZWxkOiBWZWVWYWxpZGF0ZS5GaWVsZCwKICAgIERlbGV0ZVByb21wdDogRGVsZXRlUHJvbXB0CiAgfSwKICBwcm9wczogWyJ2YXVsdF9uYW1lIiwgInZhdWx0X2Rlc2NyaXB0aW9uIl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN1Y2Nlc3M6ICIiLAogICAgICBiYWNrZW5kRXJyb3JzOiBbXSwKICAgICAgc2hvd01vZGFsOiBmYWxzZSwKICAgICAgZGVsZXRlUHJvbXB0VGV4dDogIllvdSBhcmUgYWJvdXQgdG8gZGVsZXRlIHRoaXMgdmF1bHQgJiBhbGwgaXRlbXMgaW5zaWRlIGl0LiBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuIEFyZSB5b3UgYWJzb2x1dGVseSBzdXJlPyIKICAgIH07CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAvKioKICAgICAqIFZhbGlkYXRpb24gcnVsZXMgdXNpbmcgJ3l1cCcuCiAgICAgKi8KICAgIHZhciBzY2hlbWEgPSB5dXAub2JqZWN0KHsKICAgICAgdmF1bHRfbmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCkubGFiZWwoIlZhdWx0IE5hbWUiKSwKICAgICAgdmF1bHRfZGVzY3JpcHRpb246IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgpLmxhYmVsKCJWYXVsdCBEZXNjcmlwdGlvbiIpCiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIHNjaGVtYTogc2NoZW1hCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKgogICAgICogQHBhcmFtIHZhbHVlcwogICAgICogQHBhcmFtIHJlc2V0Rm9ybQogICAgICovCiAgICBoYW5kbGVGb3JtOiBmdW5jdGlvbiBoYW5kbGVGb3JtKHZhbHVlcywgX3JlZikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzZXRGb3JtLCBlbmNyeXB0ZWRWYWx1ZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVzZXRGb3JtID0gX3JlZi5yZXNldEZvcm07CiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRWYWx1ZXMgPSBhcGkudmF1bHQuZW5jcnlwdFZhdWx0KHZhbHVlcyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyVmF1bHRVcGRhdGUoZW5jcnlwdGVkVmFsdWVzLCByZXNldEZvcm0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdHJpZ2dlclZhdWx0VXBkYXRlOiBmdW5jdGlvbiB0cmlnZ2VyVmF1bHRVcGRhdGUodmFsdWVzLCByZXNldEZvcm0pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdmF1bHRJZCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHZhdWx0SWQgPSBfdGhpczIuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBhcGkudmF1bHQudXBkYXRlKHZhdWx0SWQsIHZhbHVlcyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmJhY2tlbmRFcnJvcnMucHVzaChyZXNwb25zZS5yZXNwb25zZS5kYXRhLmVycm9ycyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXNldEZvcm0oKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdHJpZ2dlclZhdWx0RGVsZXRlOiBmdW5jdGlvbiB0cmlnZ2VyVmF1bHREZWxldGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHZhdWx0SWQsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB2YXVsdElkID0gX3RoaXMzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnZhdWx0LmRlbGV0ZSh2YXVsdElkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgICAgICAgICAgICBfdGhpczMuYmFja2VuZEVycm9ycy5wdXNoKHJlc3BvbnNlLnJlc3BvbnNlLmRhdGEuZXJyb3JzKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLnNob3dNb2RhbCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["api","DeletePrompt","VeeValidate","yup","name","components","VeeValidateForm","Form","VeeValidateField","Field","props","data","success","backendErrors","showModal","deletePromptText","setup","schema","object","vault_name","string","required","label","vault_description","methods","handleForm","values","resetForm","encryptedValues","vault","encryptVault","triggerVaultUpdate","vaultId","$route","params","id","update","response","Error","push","errors","$router","go","triggerVaultDelete","delete","status"],"sourceRoot":"","sources":["/home/kaliuser/test/vaults/frontend/src/views/Vaults/EditVault.vue"],"sourcesContent":["<template>\n  <div class=\"overlay edit-vault\">\n    <button class=\"exit-overlay\" v-on:click=\"$router.go(-1)\">\n      &#10006;\n    </button>\n    <VeeValidateForm :validation-schema=\"schema\"\n                     :initial-values=\"{ vault_name: vault_name, vault_description: vault_description }\"\n                     v-slot=\"{ errors, handleSubmit }\" as=\"div\" class=\"form\">\n      <form @submit=\"handleSubmit($event, handleForm)\">\n        <h1>Edit your vault!</h1>\n        <label>\n          <span>Vault Name</span>\n          <VeeValidateField name=\"vault_name\" type=\"text\" />\n          <p class=\"form-error\">{{ errors.vault_name }}</p>\n        </label>\n\n        <label>\n          <span>Description</span>\n          <VeeValidateField name=\"vault_description\" as=\"textarea\" />\n          <p class=\"form-error\">{{ errors.vault_description }}</p>\n        </label>\n\n        <button class=\"btn\">Save changes</button>\n        <button type=\"button\" class=\"btn delete-vault-cta\" @click=\"showModal = true\">Delete vault</button>\n\n        <li class=\"backend-errors\" v-for=\"error in backendErrors\" :key=\"error\">\n          {{ error }}\n        </li>\n\n        <p class=\"backend-success\">{{ success }}</p>\n      </form>\n    </VeeValidateForm>\n    <transition name=\"modal\">\n      <DeletePrompt v-if=\"showModal\"\n                    :prompt-text=\"deletePromptText\"\n                    @deletionConfirmed=\"triggerVaultDelete\"\n                    @deletionCancelled=\"showModal = false\">\n      </DeletePrompt>\n    </transition>\n  </div>\n</template>\n\n<script>\n\nimport {api} from \"../../services/api\";\nimport DeletePrompt from \"../../components/DeletePrompt\";\nimport * as VeeValidate from \"vee-validate\";\nimport * as yup from \"yup\";\n\nexport default {\n  name: \"CreateVault\",\n  components: {\n    // Rename the components from VeeValidate so there may be no conflicts with native HTML elements.\n    VeeValidateForm: VeeValidate.Form,\n    VeeValidateField: VeeValidate.Field,\n    DeletePrompt\n  },\n  props: [\"vault_name\", \"vault_description\"],\n  data() {\n    return {\n      success: \"\",\n      backendErrors: [],\n      showModal: false,\n      deletePromptText: \"You are about to delete this vault & all items inside it. This cannot be undone. Are you absolutely sure?\"\n    }\n  },\n  setup() {\n    /**\n     * Validation rules using 'yup'.\n     */\n    const schema = yup.object({\n      vault_name: yup.string()\n          .required()\n          .label(\"Vault Name\"),\n      vault_description: yup.string()\n          .required()\n          .label(\"Vault Description\"),\n    });\n\n    return {\n      schema\n    };\n  },\n  methods: {\n    /**\n     *\n     * @param values\n     * @param resetForm\n     */\n    async handleForm(values, { resetForm }) {\n      let encryptedValues = api.vault.encryptVault(values);\n\n      await this.triggerVaultUpdate(encryptedValues, resetForm);\n    },\n    async triggerVaultUpdate(values, resetForm) {\n      let vaultId = this.$route.params.id;\n      let response = await api.vault.update(vaultId, values);\n\n      if (response instanceof Error) {\n        this.backendErrors.push(response.response.data.errors);\n      } else {\n        resetForm();\n\n        this.$router.go(-1);\n      }\n    },\n    async triggerVaultDelete() {\n      let vaultId = this.$route.params.id;\n      let response = await api.vault.delete(vaultId);\n\n      if (response instanceof Error) {\n        this.backendErrors.push(response.response.data.errors)\n      } else if (response.status === 204) {\n        this.showModal = false;\n\n        this.$router.go(-1);\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}