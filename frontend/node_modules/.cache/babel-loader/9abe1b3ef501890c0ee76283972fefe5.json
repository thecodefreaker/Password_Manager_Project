{"remainingRequest":"/media/sf_New_Folder/test/vaults/frontend/node_modules/babel-loader/lib/index.js!/media/sf_New_Folder/test/vaults/frontend/node_modules/eslint-loader/index.js??ref--14-0!/media/sf_New_Folder/test/vaults/frontend/src/services/api/vault.js","dependencies":[{"path":"/media/sf_New_Folder/test/vaults/frontend/src/services/api/vault.js","mtime":1713871927302},{"path":"/media/sf_New_Folder/test/vaults/frontend/babel.config.js","mtime":1713871927298},{"path":"/media/sf_New_Folder/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/sf_New_Folder/test/vaults/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/media/sf_New_Folder/test/vaults/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL21lZGlhL3NmX05ld19Gb2xkZXIvdGVzdC92YXVsdHMvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvbWVkaWEvc2ZfTmV3X0ZvbGRlci90ZXN0L3ZhdWx0cy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgaHR0cCBmcm9tICIuLi9odHRwIjsKaW1wb3J0IHsgYXBpIH0gZnJvbSAiLi9pbmRleCI7CmltcG9ydCB7IEZhY3RvcnkgfSBmcm9tICIuLi8uLi9mYWN0b3J5IjsKaW1wb3J0IHsgU2VjdXJpdHkgfSBmcm9tICIuLi8uLi9wbHVnaW5zL1NlY3VyaXR5IjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uLy4uL3N0b3JlIjsKZXhwb3J0IGRlZmF1bHQgewogIGVuZHBvaW50czogewogICAgQVBJOiAiL3ZhdWx0cyIsCiAgICBDUkVBVEU6IGZ1bmN0aW9uIENSRUFURSgpIHsKICAgICAgcmV0dXJuIHRoaXMuQVBJOwogICAgfSwKICAgIFVQREFURTogZnVuY3Rpb24gVVBEQVRFKHZhdWx0SWQpIHsKICAgICAgcmV0dXJuIHRoaXMuQVBJICsgIi8iICsgdmF1bHRJZDsKICAgIH0sCiAgICBERUxFVEU6IGZ1bmN0aW9uIERFTEVURSh2YXVsdElkKSB7CiAgICAgIHJldHVybiB0aGlzLkFQSSArICIvIiArIHZhdWx0SWQ7CiAgICB9LAogICAgSVRFTVM6IGZ1bmN0aW9uIElURU1TKHZhdWx0SWQpIHsKICAgICAgcmV0dXJuIHRoaXMuQVBJICsgIi8iICsgdmF1bHRJZCArICIvaXRlbXMiOwogICAgfQogIH0sCiAgc3RvcmU6IHN0b3JlLAogIHNlY3VyaXR5OiBuZXcgU2VjdXJpdHkoKSwKCiAgLyoqCiAgICogVGhlIG1haW4gbWV0aG9kIHRvIGZldGNoIGFsbCBpdGVtcyBmb3IgdGhpcyB2YXVsdC4KICAgKgogICAqIEBwYXJhbSB2YXVsdElkCiAgICogQHJldHVybnMge1Byb21pc2U8Kj59CiAgICovCiAgZ2V0SXRlbXM6IGZ1bmN0aW9uIGdldEl0ZW1zKHZhdWx0SWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBzZWxmLCBpbml0LCBmZXRjaEl0ZW1zLCBmZXRjaEl0ZW1zU3VjY2Vzc0hhbmRsZXIsIGNyZWF0ZUl0ZW1zRnJvbUZhY3Rvcnk7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VsZiA9IF90aGlzOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIEluaXRpYWxpemVzIHRoZSBwcm9jZXNzLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIHZhdWx0SWQKICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTwqfHVuZGVmaW5lZD59CiAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgIGluaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodmF1bHRJZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoSXRlbXModmF1bHRJZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC50MCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gaW5pdChfeCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogUmVxdWVzdHMgYWxsIGl0ZW1zIGZvciB0aGlzIHZhdWx0LgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIHZhdWx0SWQKICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTwqfHVuZGVmaW5lZD59CiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICBmZXRjaEl0ZW1zID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodmF1bHRJZCkgewogICAgICAgICAgICAgICAgICB2YXIgdXJsLCBpdGVtczsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBzZWxmLmVuZHBvaW50cy5JVEVNUyh2YXVsdElkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoSXRlbXNTdWNjZXNzSGFuZGxlcihpdGVtcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZmV0Y2hJdGVtcyhfeDIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBIYW5kbGVyIHdoZW4gJ2ZldGNoSXRlbXMnIHJlc29sdmVkIHN1Y2Nlc3NmdWxseS4KICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPCo+fQogICAgICAgICAgICAgICAqLwoKCiAgICAgICAgICAgICAgZmV0Y2hJdGVtc1N1Y2Nlc3NIYW5kbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRlY3J5cHRlZEl0ZW1zLCBpdGVtczsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjcnlwdGVkSXRlbXMgPSBhcGkuZGVjcnlwdFJlc3BvbnNlT2JqZWN0cyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGNyZWF0ZUl0ZW1zRnJvbUZhY3RvcnkoZGVjcnlwdGVkSXRlbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdG9yZS5kaXNwYXRjaCgidXNlci9zZXRJdGVtcyIsIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBmZXRjaEl0ZW1zU3VjY2Vzc0hhbmRsZXIoX3gzKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgIGNyZWF0ZUl0ZW1zRnJvbUZhY3RvcnkgPSBmdW5jdGlvbiBjcmVhdGVJdGVtc0Zyb21GYWN0b3J5KGl0ZW1zKSB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkID0gW107CiAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gaXRlbS5kYXRhLml0ZW1fdHlwZTsKICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1PYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogaXRlbS5kYXRhLAogICAgICAgICAgICAgICAgICAgIHZhdWx0X2lkOiBpdGVtLnZhdWx0X2lkLAogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X2lkOiBpdGVtLmNhdGVnb3J5X2lkCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGl0ZW1PYmplY3QgPSBuZXcgRmFjdG9yeSgpLmNyZWF0ZSh0eXBlLCBpdGVtT2JqZWN0KTsKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkLnB1c2goaXRlbU9iamVjdC5kdG8oKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBpbml0KHZhdWx0SWQpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQuc2VudCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBUaGUgbWFpbiBtZXRob2QgdG8gZmV0Y2ggdGhlIHVzZXIncyBlbmNyeXB0ZWQgdmF1bHRzLgogICAqCiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59CiAgICovCiAgZmV0Y2hBbGw6IGZ1bmN0aW9uIGZldGNoQWxsKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgIHZhciBzZWxmLCBpbml0LCBmZXRjaFZhdWx0cywgc3VjY2Vzc0hhbmRsZXIsIGNyZWF0ZVZhdWx0c0Zyb21GYWN0b3J5OwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNlbGYgPSBfdGhpczI7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogSW5pdGlhbGl6ZXMgdGhlIHByb2Nlc3MuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTwqfCo+fQogICAgICAgICAgICAgICAqLwoKICAgICAgICAgICAgICBpbml0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hWYXVsdHMoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NS50MCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1swLCA2XV0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIFJlcXVlc3RzIHRoZSB1c2VyJ3MgZW5jcnlwdGVkIHZhdWx0cy4KICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPCo+fQogICAgICAgICAgICAgICAqLwoKCiAgICAgICAgICAgICAgZmV0Y2hWYXVsdHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICAgICAgICAgICAgdmFyIHZhdWx0czsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZWxmLmVuZHBvaW50cy5BUEksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHRzID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzSGFuZGxlcih2YXVsdHMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDYuc2VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZldGNoVmF1bHRzKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIEhhbmRsZXIgd2hlbiAnZmV0Y2hWYXVsdHMnIHJlc29sdmVkIHN1Y2Nlc3NmdWxseS4KICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEBwYXJhbSByZXNwb25zZQogICAgICAgICAgICAgICAqIEByZXR1cm5zIHt7fX0KICAgICAgICAgICAgICAgKi8KCgogICAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRlY3J5cHRlZFZhdWx0cywgdmF1bHRzOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ZWRWYXVsdHMgPSBhcGkuZGVjcnlwdFJlc3BvbnNlT2JqZWN0cyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXVsdHMgPSBjcmVhdGVWYXVsdHNGcm9tRmFjdG9yeShkZWNyeXB0ZWRWYXVsdHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdG9yZS5kaXNwYXRjaCgidXNlci9zZXRWYXVsdHMiLCB2YXVsdHMpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Y2Nlc3NIYW5kbGVyKF94NCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICBjcmVhdGVWYXVsdHNGcm9tRmFjdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZVZhdWx0c0Zyb21GYWN0b3J5KHZhdWx0cykgewogICAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlZCA9IFtdOwogICAgICAgICAgICAgICAgdmF1bHRzLmZvckVhY2goZnVuY3Rpb24gKHZhdWx0KSB7CiAgICAgICAgICAgICAgICAgIHZhciB2YXVsdE9iamVjdCA9IG5ldyBGYWN0b3J5KCkuY3JlYXRlKCJ2YXVsdCIsIHZhdWx0KTsKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkLnB1c2godmF1bHRPYmplY3QuZHRvKCkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkOwogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gaW5pdCgpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDguc2VudCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlOCk7CiAgICB9KSkoKTsKICB9LAoKICAvKioKICAgKiBUaGUgbWFpbiBtZXRob2QgdG8gY3JlYXRlIGFuIGVuY3J5cHRlZCB2YXVsdC4KICAgKgogICAqIEBwYXJhbSB2YWx1ZXMKICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBeGlvc1Jlc3BvbnNlPGFueT58Kj59CiAgICovCiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWVzKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgIHZhciBzZWxmLCBpbml0LCBjcmVhdGVWYXVsdCwgc3VjY2Vzc0hhbmRsZXI7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNlbGYgPSBfdGhpczM7CiAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICogSW5pdGlhbGl6ZXMgdGhlIHByb2Nlc3MuCiAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgKiBAcGFyYW0gdmFsdWVzCiAgICAgICAgICAgICAgICogQHJldHVybnMge1Byb21pc2U8QXhpb3NSZXNwb25zZTwqPnwqPn0KICAgICAgICAgICAgICAgKi8KCiAgICAgICAgICAgICAgaW5pdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KHZhbHVlcykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZhdWx0KHZhbHVlcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OS5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5LnQwID0gX2NvbnRleHQ5WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDkudDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTksIG51bGwsIFtbMCwgNl1dKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gaW5pdChfeDUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBNYWtlcyB0aGUgcmVxdWVzdCB0byBjcmVhdGUgYSB2YXVsdC4KICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZXMKICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBeGlvc1Jlc3BvbnNlPGFueT4+fQogICAgICAgICAgICAgICAqLwoKCiAgICAgICAgICAgICAgY3JlYXRlVmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAodmFsdWVzKSB7CiAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHR0cC5yZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzZWxmLmVuZHBvaW50cy5DUkVBVEUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2Vzc0hhbmRsZXIocmVzcG9uc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMC5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVWYXVsdChfeDYpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgc3VjY2Vzc0hhbmRsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgdmFyIGRlY3J5cHRlZExvZ2luLCB2YXVsdDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSAyMDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ZWRMb2dpbiA9IGFwaS5kZWNyeXB0UmVzcG9uc2VPYmplY3QocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHQgPSBzZWxmLmNyZWF0ZVZhdWx0RnJvbUZhY3RvcnkoZGVjcnlwdGVkTG9naW4pOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuc3RvcmUuZGlzcGF0Y2goInVzZXIvYWRkVmF1bHQiLCB2YXVsdCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3VjY2Vzc0hhbmRsZXIoX3g3KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXQodmFsdWVzKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTIuc2VudCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTEyKTsKICAgIH0pKSgpOwogIH0sCgogIC8qKgogICAqIFRoZSBtYWluIG1ldGhvZCB0byB1cGRhdGUgYSB2YXVsdC4KICAgKgogICAqIEBwYXJhbSBpZAogICAqIEBwYXJhbSB2YWx1ZXMKICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBeGlvc1Jlc3BvbnNlPGFueT58Kj59CiAgICovCiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIHZhbHVlcykgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE2KCkgewogICAgICB2YXIgc2VsZiwgaW5pdCwgdXBkYXRlVmF1bHQsIHN1Y2Nlc3NIYW5kbGVyOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE2KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZWxmID0gX3RoaXM0OwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIEluaXRpYWxpemVzIHRoZSBwcm9jZXNzLgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIGlkCiAgICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlcwogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEF4aW9zUmVzcG9uc2U8Kj58Kj59CiAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgIGluaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYxMCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKGlkLCB2YWx1ZXMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVWYXVsdChpZCwgdmFsdWVzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTMuc2VudCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLnQwID0gX2NvbnRleHQxM1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTMudDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMywgbnVsbCwgW1swLCA2XV0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBpbml0KF94OCwgX3g5KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIE1ha2VzIHRoZSByZXF1ZXN0IHRvIHVwZGF0ZSBhIHZhdWx0LgogICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICogQHBhcmFtIGlkCiAgICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlcwogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEF4aW9zUmVzcG9uc2U8YW55Pj59CiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICB1cGRhdGVWYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjExID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoaWQsIHZhbHVlcykgewogICAgICAgICAgICAgICAgICB2YXIgdXJsLCByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gc2VsZi5lbmRwb2ludHMuVVBEQVRFKGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBodHRwLnJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAicHV0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB2YWx1ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzSGFuZGxlcihyZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDE0LnNlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxNCk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVZhdWx0KF94MTAsIF94MTEpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNShyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB2YXIgZGVjcnlwdGVkTG9naW4sIHZhdWx0OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGRlY3J5cHRlZExvZ2luID0gYXBpLmRlY3J5cHRSZXNwb25zZU9iamVjdChyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXVsdCA9IHNlbGYuY3JlYXRlVmF1bHRGcm9tRmFjdG9yeShkZWNyeXB0ZWRMb2dpbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5zdG9yZS5kaXNwYXRjaCgidXNlci91cGRhdGVWYXVsdCIsIHZhdWx0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTUpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdWNjZXNzSGFuZGxlcihfeDEyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMTIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpOwoKICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBpbml0KGlkLCB2YWx1ZXMpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNi5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTYpOwogICAgfSkpKCk7CiAgfSwKCiAgLyoqCiAgICogVGhlIG1haW4gbWV0aG9kIHRvIGRlbGV0ZSBhIHZhdWx0LgogICAqCiAgICogQHBhcmFtIGlkCiAgICogQHJldHVybnMge1Byb21pc2U8QXhpb3NSZXNwb25zZTwqPnwqPn0KICAgKi8KICBkZWxldGU6IGZ1bmN0aW9uIF9kZWxldGUoaWQpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMCgpIHsKICAgICAgdmFyIHNlbGYsIGluaXQsIGRlbGV0ZVZhdWx0LCBzdWNjZXNzSGFuZGxlcjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMCQoX2NvbnRleHQyMCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjAucHJldiA9IF9jb250ZXh0MjAubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VsZiA9IF90aGlzNTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBJbml0aWFsaXplcyB0aGUgcHJvY2Vzcy4KICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEBwYXJhbSBpZAogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEF4aW9zUmVzcG9uc2U8Kj58Kj59CiAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgIGluaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWYxMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KGlkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTcucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlVmF1bHQoaWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNy5zZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE3LnByZXYgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTcudDAgPSBfY29udGV4dDE3WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNy50MCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE3LCBudWxsLCBbWzAsIDZdXSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGluaXQoX3gxMykgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjEzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBNYWtlcyB0aGUgcmVxdWVzdCB0byBkZWxldGUgYSB2YXVsdC4KICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEBwYXJhbSBpZAogICAgICAgICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEF4aW9zUmVzcG9uc2U8YW55Pj59CiAgICAgICAgICAgICAgICovCgoKICAgICAgICAgICAgICBkZWxldGVWYXVsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjE0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoaWQpIHsKICAgICAgICAgICAgICAgICAgdmFyIHVybCwgcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTgkKF9jb250ZXh0MTgpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHNlbGYuZW5kcG9pbnRzLkRFTEVURShpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaHR0cC5yZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImRlbGV0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHt9KQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxOC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3NIYW5kbGVyKHJlc3BvbnNlLCBpZCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDE4LnNlbnQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxOCk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGV0ZVZhdWx0KF94MTQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOShyZXNwb25zZSwgaWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxOSQoX2NvbnRleHQxOSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnN0b3JlLmRpc3BhdGNoKCJ1c2VyL2RlbGV0ZVZhdWx0IiwgaWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Y2Nlc3NIYW5kbGVyKF94MTUsIF94MTYpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXQoaWQpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyMC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMjApOwogICAgfSkpKCk7CiAgfSwKICBjcmVhdGVWYXVsdEZyb21GYWN0b3J5OiBmdW5jdGlvbiBjcmVhdGVWYXVsdEZyb21GYWN0b3J5KGl0ZW0pIHsKICAgIHZhciBmb3JtYXR0ZWQgPSBuZXcgRmFjdG9yeSgpLmNyZWF0ZSgidmF1bHQiLCBpdGVtKTsKICAgIHJldHVybiBmb3JtYXR0ZWQuZHRvKCk7CiAgfSwKCiAgLyoqCiAgICogRW5jcnlwdHMgZ2l2ZW4gdmF1bHQgZGF0YTsgdXNlZCB3aGVuIGNyZWF0aW5nIGFuZCB1cGRhdGluZy4KICAgKgogICAqIEBwYXJhbSBkYXRhCiAgICogQHJldHVybnMge3N0cmluZ30KICAgKi8KICBlbmNyeXB0VmF1bHQ6IGZ1bmN0aW9uIGVuY3J5cHRWYXVsdChkYXRhKSB7CiAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICByZXR1cm4gdGhpcy5zZWN1cml0eS5lbmNyeXB0KGRhdGEsIHRoaXMuc3RvcmUuZ2V0dGVyc1sidXNlci9nZXRFbmNyeXB0aW9uS2V5Il0pOwogIH0KfTs="},{"version":3,"names":["http","api","Factory","Security","store","endpoints","API","CREATE","UPDATE","vaultId","DELETE","ITEMS","security","getItems","self","init","fetchItems","url","request","method","data","items","fetchItemsSuccessHandler","response","status","decryptedItems","decryptResponseObjects","createItemsFromFactory","dispatch","formatted","forEach","item","type","item_type","itemObject","id","vault_id","category_id","create","push","dto","fetchAll","fetchVaults","vaults","successHandler","decryptedVaults","createVaultsFromFactory","vault","vaultObject","values","createVault","decryptedLogin","decryptResponseObject","createVaultFromFactory","update","updateVault","delete","deleteVault","JSON","stringify","encryptVault","encrypt","getters"],"sources":["/media/sf_New_Folder/test/vaults/frontend/src/services/api/vault.js"],"sourcesContent":["import http from \"../http\";\nimport {api} from \"./index\";\nimport {Factory} from \"../../factory\";\nimport {Security} from \"../../plugins/Security\";\nimport store from \"../../store\";\n\nexport default {\n    endpoints: {\n        API: \"/vaults\",\n        CREATE() {\n            return this.API;\n        },\n        UPDATE(vaultId) {\n            return this.API + \"/\" + vaultId;\n        },\n        DELETE(vaultId) {\n            return this.API + \"/\" + vaultId;\n        },\n        ITEMS(vaultId) {\n            return this.API + \"/\" + vaultId + \"/items\";\n        }\n    },\n\n    store,\n\n    security: new Security(),\n\n    /**\n     * The main method to fetch all items for this vault.\n     *\n     * @param vaultId\n     * @returns {Promise<*>}\n     */\n    async getItems(vaultId) {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @param vaultId\n         * @returns {Promise<*|undefined>}\n         */\n        const init = async function(vaultId) {\n            try {\n                return await fetchItems(vaultId);\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Requests all items for this vault.\n         *\n         * @param vaultId\n         * @returns {Promise<*|undefined>}\n         */\n        const fetchItems = async function(vaultId) {\n            let url = self.endpoints.ITEMS(vaultId)\n\n            let items = await http.request({\n                method: \"get\",\n                url: url,\n                data: null\n            });\n\n            return await fetchItemsSuccessHandler(items);\n        };\n\n        /**\n         * Handler when 'fetchItems' resolved successfully.\n         *\n         * @param response\n         * @returns {Promise<*>}\n         */\n        const fetchItemsSuccessHandler = async function(response) {\n            if(response.status === 200) {\n                let decryptedItems = api.decryptResponseObjects(response.data);\n                let items = createItemsFromFactory(decryptedItems);\n\n                await self.store.dispatch(\"user/setItems\", items);\n\n                return response;\n            }\n        };\n\n        const createItemsFromFactory = function(items) {\n            let formatted = [];\n\n            items.forEach(item => {\n                let type = item.data.item_type;\n                let itemObject = {\n                    id: item.id,\n                    data: item.data,\n                    vault_id: item.vault_id,\n                    category_id: item.category_id\n                };\n\n                itemObject = new Factory().create(type, itemObject);\n\n                formatted.push(itemObject.dto());\n            });\n\n            return formatted;\n        };\n\n        return await init(vaultId);\n    },\n\n    /**\n     * The main method to fetch the user's encrypted vaults.\n     *\n     * @returns {Promise<void>}\n     */\n    async fetchAll() {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @returns {Promise<*|*>}\n         */\n        const init = async function() {\n            try {\n                return await fetchVaults();\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Requests the user's encrypted vaults.\n         *\n         * @returns {Promise<*>}\n         */\n        const fetchVaults = async function() {\n            let vaults = await http.request({\n                method: \"get\",\n                url: self.endpoints.API,\n                data: null\n            });\n\n            return await successHandler(vaults);\n        };\n\n        /**\n         * Handler when 'fetchVaults' resolved successfully.\n         *\n         * @param response\n         * @returns {{}}\n         */\n        const successHandler = async function(response) {\n            if(response.status === 200) {\n                let decryptedVaults = api.decryptResponseObjects(response.data);\n\n                let vaults = createVaultsFromFactory(decryptedVaults);\n\n                await self.store.dispatch(\"user/setVaults\", vaults);\n            }\n\n            return response;\n        };\n\n        const createVaultsFromFactory = function(vaults) {\n            let formatted = [];\n\n            vaults.forEach(vault => {\n                let vaultObject = new Factory().create(\"vault\", vault);\n\n                formatted.push(vaultObject.dto());\n            });\n\n            return formatted;\n        };\n\n        return await init();\n    },\n\n    /**\n     * The main method to create an encrypted vault.\n     *\n     * @param values\n     * @returns {Promise<AxiosResponse<any>|*>}\n     */\n    async create(values) {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @param values\n         * @returns {Promise<AxiosResponse<*>|*>}\n         */\n        const init = async function(values) {\n            try {\n                return await createVault(values);\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Makes the request to create a vault.\n         *\n         * @param values\n         * @returns {Promise<AxiosResponse<any>>}\n         */\n        const createVault = async function(values) {\n            let response = await http.request({\n                method: \"post\",\n                url: self.endpoints.CREATE(),\n                data: {\n                    data: values\n                }\n            });\n\n            return await successHandler(response);\n        };\n\n        const successHandler = async function(response) {\n            if(response.status === 201) {\n                let decryptedLogin = api.decryptResponseObject(response.data);\n                let vault = self.createVaultFromFactory(decryptedLogin);\n\n                await self.store.dispatch(\"user/addVault\", vault);\n            }\n\n            return response;\n        };\n\n        return await init(values);\n    },\n\n    /**\n     * The main method to update a vault.\n     *\n     * @param id\n     * @param values\n     * @returns {Promise<AxiosResponse<any>|*>}\n     */\n    async update(id, values) {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @param id\n         * @param values\n         * @returns {Promise<AxiosResponse<*>|*>}\n         */\n        const init = async function(id, values) {\n            try {\n                return await updateVault(id, values);\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Makes the request to update a vault.\n         *\n         * @param id\n         * @param values\n         * @returns {Promise<AxiosResponse<any>>}\n         */\n        const updateVault = async function(id, values) {\n            let url = self.endpoints.UPDATE(id);\n\n            let response = await http.request({\n                method: \"put\",\n                url: url,\n                data: {\n                    data: values\n                }\n            });\n\n            return await successHandler(response);\n        };\n\n        const successHandler = async function(response) {\n            if(response.status === 200) {\n                let decryptedLogin = api.decryptResponseObject(response.data);\n                let vault = self.createVaultFromFactory(decryptedLogin);\n\n                await self.store.dispatch(\"user/updateVault\", vault);\n            }\n\n            return response;\n        };\n\n        return await init(id, values);\n    },\n\n    /**\n     * The main method to delete a vault.\n     *\n     * @param id\n     * @returns {Promise<AxiosResponse<*>|*>}\n     */\n    async delete(id) {\n        let self = this;\n\n        /**\n         * Initializes the process.\n         *\n         * @param id\n         * @returns {Promise<AxiosResponse<*>|*>}\n         */\n        const init = async function(id) {\n            try {\n                return await deleteVault(id);\n            } catch (error) {\n                return error;\n            }\n        };\n\n        /**\n         * Makes the request to delete a vault.\n         *\n         * @param id\n         * @returns {Promise<AxiosResponse<any>>}\n         */\n        const deleteVault = async function(id) {\n            let url = self.endpoints.DELETE(id);\n\n            let response = await http.request({\n                method: \"delete\",\n                url: url,\n                data: JSON.stringify({})\n            });\n\n            return await successHandler(response, id);\n        };\n\n        const successHandler = async function(response, id) {\n            if(response.status === 204) {\n                await self.store.dispatch(\"user/deleteVault\", id);\n            }\n\n            return response;\n        };\n\n        return await init(id);\n    },\n\n    createVaultFromFactory(item) {\n        let formatted = new Factory().create(\"vault\", item);\n\n        return formatted.dto();\n    },\n\n    /**\n     * Encrypts given vault data; used when creating and updating.\n     *\n     * @param data\n     * @returns {string}\n     */\n    encryptVault(data) {\n        data = JSON.stringify(data);\n\n        return this.security.encrypt(data, this.store.getters[\"user/getEncryptionKey\"]);\n    }\n}\n"],"mappings":"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"}]}