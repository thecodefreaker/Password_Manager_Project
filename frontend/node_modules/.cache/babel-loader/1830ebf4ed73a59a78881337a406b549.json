{"remainingRequest":"/home/kaliuser/test/vaults/frontend/node_modules/babel-loader/lib/index.js!/home/kaliuser/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/kaliuser/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/kaliuser/test/vaults/frontend/src/views/Vaults/EditVault.vue?vue&type=template&id=9c0d6d58","dependencies":[{"path":"/home/kaliuser/test/vaults/frontend/src/views/Vaults/EditVault.vue","mtime":1713871927302},{"path":"/home/kaliuser/test/vaults/frontend/babel.config.js","mtime":1713871927298},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kaliuser/test/vaults/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBUcmFuc2l0aW9uIGFzIF9UcmFuc2l0aW9uIH0gZnJvbSAidnVlIjsKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJvdmVybGF5IGVkaXQtdmF1bHQiCn07CnZhciBfaG9pc3RlZF8yID0gWyJvblN1Ym1pdCJdOwoKdmFyIF9ob2lzdGVkXzMgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDEiLCBudWxsLCAiRWRpdCB5b3VyIHZhdWx0ISIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCAiVmF1bHQgTmFtZSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF81ID0gewogIGNsYXNzOiAiZm9ybS1lcnJvciIKfTsKCnZhciBfaG9pc3RlZF82ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCAiRGVzY3JpcHRpb24iLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogImZvcm0tZXJyb3IiCn07Cgp2YXIgX2hvaXN0ZWRfOCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgY2xhc3M6ICJidG4iCn0sICJTYXZlIGNoYW5nZXMiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfOSA9IHsKICBjbGFzczogImJhY2tlbmQtc3VjY2VzcyIKfTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9WZWVWYWxpZGF0ZUZpZWxkID0gX3Jlc29sdmVDb21wb25lbnQoIlZlZVZhbGlkYXRlRmllbGQiKTsKCiAgdmFyIF9jb21wb25lbnRfVmVlVmFsaWRhdGVGb3JtID0gX3Jlc29sdmVDb21wb25lbnQoIlZlZVZhbGlkYXRlRm9ybSIpOwoKICB2YXIgX2NvbXBvbmVudF9EZWxldGVQcm9tcHQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiRGVsZXRlUHJvbXB0Iik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICBjbGFzczogImV4aXQtb3ZlcmxheSIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuIF9jdHguJHJvdXRlci5nbygtMSk7CiAgICB9KQogIH0sICIg4pyWICIpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9WZWVWYWxpZGF0ZUZvcm0sIHsKICAgICJ2YWxpZGF0aW9uLXNjaGVtYSI6ICRzZXR1cC5zY2hlbWEsCiAgICAiaW5pdGlhbC12YWx1ZXMiOiB7CiAgICAgIHZhdWx0X25hbWU6ICRwcm9wcy52YXVsdF9uYW1lLAogICAgICB2YXVsdF9kZXNjcmlwdGlvbjogJHByb3BzLnZhdWx0X2Rlc2NyaXB0aW9uCiAgICB9LAogICAgYXM6ICJkaXYiLAogICAgY2xhc3M6ICJmb3JtIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBlcnJvcnMgPSBfcmVmLmVycm9ycywKICAgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0OwogICAgICByZXR1cm4gW19jcmVhdGVFbGVtZW50Vk5vZGUoImZvcm0iLCB7CiAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCRldmVudCkgewogICAgICAgICAgcmV0dXJuIGhhbmRsZVN1Ym1pdCgkZXZlbnQsICRvcHRpb25zLmhhbmRsZUZvcm0pOwogICAgICAgIH0KICAgICAgfSwgW19ob2lzdGVkXzMsIF9jcmVhdGVFbGVtZW50Vk5vZGUoImxhYmVsIiwgbnVsbCwgW19ob2lzdGVkXzQsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1ZlZVZhbGlkYXRlRmllbGQsIHsKICAgICAgICBuYW1lOiAidmF1bHRfbmFtZSIsCiAgICAgICAgdHlwZTogInRleHQiCiAgICAgIH0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJwIiwgX2hvaXN0ZWRfNSwgX3RvRGlzcGxheVN0cmluZyhlcnJvcnMudmF1bHRfbmFtZSksIDEKICAgICAgLyogVEVYVCAqLwogICAgICApXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImxhYmVsIiwgbnVsbCwgW19ob2lzdGVkXzYsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1ZlZVZhbGlkYXRlRmllbGQsIHsKICAgICAgICBuYW1lOiAidmF1bHRfZGVzY3JpcHRpb24iLAogICAgICAgIGFzOiAidGV4dGFyZWEiCiAgICAgIH0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJwIiwgX2hvaXN0ZWRfNywgX3RvRGlzcGxheVN0cmluZyhlcnJvcnMudmF1bHRfZGVzY3JpcHRpb24pLCAxCiAgICAgIC8qIFRFWFQgKi8KICAgICAgKV0pLCBfaG9pc3RlZF84LCBfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgY2xhc3M6ICJidG4gZGVsZXRlLXZhdWx0LWN0YSIsCiAgICAgICAgb25DbGljazogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gJGRhdGEuc2hvd01vZGFsID0gdHJ1ZTsKICAgICAgICB9KQogICAgICB9LCAiRGVsZXRlIHZhdWx0IiksIChfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJGRhdGEuYmFja2VuZEVycm9ycywgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygibGkiLCB7CiAgICAgICAgICBjbGFzczogImJhY2tlbmQtZXJyb3JzIiwKICAgICAgICAgIGtleTogZXJyb3IKICAgICAgICB9LCBfdG9EaXNwbGF5U3RyaW5nKGVycm9yKSwgMQogICAgICAgIC8qIFRFWFQgKi8KICAgICAgICApOwogICAgICB9KSwgMTI4CiAgICAgIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgICAgICkpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJwIiwgX2hvaXN0ZWRfOSwgX3RvRGlzcGxheVN0cmluZygkZGF0YS5zdWNjZXNzKSwgMQogICAgICAvKiBURVhUICovCiAgICAgICldLCA0MAogICAgICAvKiBQUk9QUywgSFlEUkFURV9FVkVOVFMgKi8KICAgICAgLCBfaG9pc3RlZF8yKV07CiAgICB9KSwKICAgIF86IDEKICAgIC8qIFNUQUJMRSAqLwoKICB9LCA4CiAgLyogUFJPUFMgKi8KICAsIFsidmFsaWRhdGlvbi1zY2hlbWEiLCAiaW5pdGlhbC12YWx1ZXMiXSksIF9jcmVhdGVWTm9kZShfVHJhbnNpdGlvbiwgewogICAgbmFtZTogIm1vZGFsIgogIH0sIHsKICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFskZGF0YS5zaG93TW9kYWwgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9EZWxldGVQcm9tcHQsIHsKICAgICAgICBrZXk6IDAsCiAgICAgICAgInByb21wdC10ZXh0IjogJGRhdGEuZGVsZXRlUHJvbXB0VGV4dCwKICAgICAgICBvbkRlbGV0aW9uQ29uZmlybWVkOiAkb3B0aW9ucy50cmlnZ2VyVmF1bHREZWxldGUsCiAgICAgICAgb25EZWxldGlvbkNhbmNlbGxlZDogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gJGRhdGEuc2hvd01vZGFsID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgfSwgbnVsbCwgOAogICAgICAvKiBQUk9QUyAqLwogICAgICAsIFsicHJvbXB0LXRleHQiLCAib25EZWxldGlvbkNvbmZpcm1lZCJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSldKTsKfQ=="},{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;;8BAQLC,oBAAyB,IAAzB,EAAyB,IAAzB,EAAI,kBAAJ,EAAoB;AAAA;AAApB;;8BAEEA,oBAAuB,MAAvB,EAAuB,IAAvB,EAAM,YAAN,EAAgB;AAAA;AAAhB;;;EAEGD,KAAK,EAAC;;;8BAITC,oBAAwB,MAAxB,EAAwB,IAAxB,EAAM,aAAN,EAAiB;AAAA;AAAjB;;;EAEGD,KAAK,EAAC;;;8BAGXC,oBAAyC,QAAzC,EAAyC;EAAjCD,KAAK,EAAC;AAA2B,CAAzC,EAAoB,cAApB,EAAgC;AAAA;AAAhC;;;EAOGA,KAAK,EAAC;;;;;;;;;uBA5BfE,oBAsCM,KAtCN,cAsCM,CArCJD,oBAES,QAFT,EAES;IAFDD,KAAK,EAAC,cAEL;IAFyBG,OAAK;MAAA,OAAEC,aAAQC,EAAR,CAAU,EAAV,CAAF;IAAA;EAE9B,CAFT,EAAyD,KAAzD,CAqCI,EAlCJC,aA0BkBC,0BA1BlB,EA0BkB;IA1BA,qBAAmBC,aA0BnB;IAzBA,kBAAc;MAAAC,YAAgBC,iBAAhB;MAA0BC,mBAAqBD;IAA/C,CAyBd;IAxBiCE,EAAE,EAAC,KAwBpC;IAxB0CZ,KAAK,EAAC;EAwBhD,CA1BlB;sBAGE;MAAA,IADyBa,MACzB,QADyBA,MACzB;MAAA,IADiCC,YACjC,QADiCA,YACjC;MAAA,OAD6C,CAC7Cb,oBAsBO,MAtBP,EAsBO;QAtBAc,QAAM;UAAA,OAAED,YAAY,CAACE,MAAD,EAASC,mBAAT,CAAd;QAAA;MAsBN,CAtBP,GACEC,YACAjB,oBAIQ,OAJR,EAIQ,IAJR,EAIQ,CAHNkB,UAGM,EAFNb,aAAkDc,2BAAlD,EAAkD;QAAhCC,IAAI,EAAC,YAA2B;QAAdC,IAAI,EAAC;MAAS,CAAlD,CAEM,EADNrB,oBAAiD,GAAjD,cAAiDsB,iBAAxBV,MAAM,CAACJ,UAAiB,CAAjD,EAA0C;MAAA;MAA1C,CACM,CAJR,GAMAR,oBAIQ,OAJR,EAIQ,IAJR,EAIQ,CAHNuB,UAGM,EAFNlB,aAA2Dc,2BAA3D,EAA2D;QAAzCC,IAAI,EAAC,mBAAoC;QAAhBT,EAAE,EAAC;MAAa,CAA3D,CAEM,EADNX,oBAAwD,GAAxD,cAAwDsB,iBAA/BV,MAAM,CAACF,iBAAwB,CAAxD,EAAiD;MAAA;MAAjD,CACM,CAJR,GAMAc,YACAxB,oBAAkG,QAAlG,EAAkG;QAA1FqB,IAAI,EAAC,QAAqF;QAA5EtB,KAAK,EAAC,sBAAsE;QAA9CG,OAAK;UAAA,OAAEuB,kBAAS,IAAX;QAAA;MAAyC,CAAlG,EAA6E,cAA7E,sBAEAxB,oBAEKyB,SAFL,EAEK,IAFL,EAEKC,YAFsCF,mBAEtC,EAFmD,UAAtBG,KAAsB,EAAjB;6BAAvC3B,oBAEK,IAFL,EAEK;UAFDF,KAAK,EAAC,gBAEL;UAFsD8B,GAAG,EAAED;QAE3D,CAFL,mBACKA,MADL,EACU;QAAA;QADV;OAEK,CAFL;;MAAA,IAIA5B,oBAA4C,GAA5C,cAA4CsB,iBAAdG,aAAc,CAA5C,EAAqC;MAAA;MAArC,EArBF;;MAAA,aAD6C,CAC7C;IAAA;;;;GAHF;;EAAA,0CAkCI,EAPJpB,aAMayB,WANb,EAMa;IANDV,IAAI,EAAC;EAMJ,CANb,EAAwB;sBACtB;MAAA,OAIe,CAJKK,iCAApBM,aAIeC,uBAJf,EAIe;cAAA;QAHA,eAAaP,sBAGb;QAFAQ,mBAAiB,EAAEjB,2BAEnB;QADAkB,mBAAiB;UAAA,OAAET,kBAAS,KAAX;QAAA;MACjB,CAJf;;MAAA,8EAIe,CAJf;IAAA,EADsB;;;;EAAA,CAAxB,CAOI,CAtCN","names":["class","_createElementVNode","_createElementBlock","onClick","_ctx","go","_createVNode","_component_VeeValidateForm","$setup","vault_name","$props","vault_description","as","errors","handleSubmit","onSubmit","$event","$options","_hoisted_3","_hoisted_4","_component_VeeValidateField","name","type","_toDisplayString","_hoisted_6","_hoisted_8","$data","_Fragment","_renderList","error","key","_Transition","_createBlock","_component_DeletePrompt","onDeletionConfirmed","onDeletionCancelled"],"sourceRoot":"","sources":["/home/kaliuser/test/vaults/frontend/src/views/Vaults/EditVault.vue"],"sourcesContent":["<template>\n  <div class=\"overlay edit-vault\">\n    <button class=\"exit-overlay\" v-on:click=\"$router.go(-1)\">\n      &#10006;\n    </button>\n    <VeeValidateForm :validation-schema=\"schema\"\n                     :initial-values=\"{ vault_name: vault_name, vault_description: vault_description }\"\n                     v-slot=\"{ errors, handleSubmit }\" as=\"div\" class=\"form\">\n      <form @submit=\"handleSubmit($event, handleForm)\">\n        <h1>Edit your vault!</h1>\n        <label>\n          <span>Vault Name</span>\n          <VeeValidateField name=\"vault_name\" type=\"text\" />\n          <p class=\"form-error\">{{ errors.vault_name }}</p>\n        </label>\n\n        <label>\n          <span>Description</span>\n          <VeeValidateField name=\"vault_description\" as=\"textarea\" />\n          <p class=\"form-error\">{{ errors.vault_description }}</p>\n        </label>\n\n        <button class=\"btn\">Save changes</button>\n        <button type=\"button\" class=\"btn delete-vault-cta\" @click=\"showModal = true\">Delete vault</button>\n\n        <li class=\"backend-errors\" v-for=\"error in backendErrors\" :key=\"error\">\n          {{ error }}\n        </li>\n\n        <p class=\"backend-success\">{{ success }}</p>\n      </form>\n    </VeeValidateForm>\n    <transition name=\"modal\">\n      <DeletePrompt v-if=\"showModal\"\n                    :prompt-text=\"deletePromptText\"\n                    @deletionConfirmed=\"triggerVaultDelete\"\n                    @deletionCancelled=\"showModal = false\">\n      </DeletePrompt>\n    </transition>\n  </div>\n</template>\n\n<script>\n\nimport {api} from \"../../services/api\";\nimport DeletePrompt from \"../../components/DeletePrompt\";\nimport * as VeeValidate from \"vee-validate\";\nimport * as yup from \"yup\";\n\nexport default {\n  name: \"CreateVault\",\n  components: {\n    // Rename the components from VeeValidate so there may be no conflicts with native HTML elements.\n    VeeValidateForm: VeeValidate.Form,\n    VeeValidateField: VeeValidate.Field,\n    DeletePrompt\n  },\n  props: [\"vault_name\", \"vault_description\"],\n  data() {\n    return {\n      success: \"\",\n      backendErrors: [],\n      showModal: false,\n      deletePromptText: \"You are about to delete this vault & all items inside it. This cannot be undone. Are you absolutely sure?\"\n    }\n  },\n  setup() {\n    /**\n     * Validation rules using 'yup'.\n     */\n    const schema = yup.object({\n      vault_name: yup.string()\n          .required()\n          .label(\"Vault Name\"),\n      vault_description: yup.string()\n          .required()\n          .label(\"Vault Description\"),\n    });\n\n    return {\n      schema\n    };\n  },\n  methods: {\n    /**\n     *\n     * @param values\n     * @param resetForm\n     */\n    async handleForm(values, { resetForm }) {\n      let encryptedValues = api.vault.encryptVault(values);\n\n      await this.triggerVaultUpdate(encryptedValues, resetForm);\n    },\n    async triggerVaultUpdate(values, resetForm) {\n      let vaultId = this.$route.params.id;\n      let response = await api.vault.update(vaultId, values);\n\n      if (response instanceof Error) {\n        this.backendErrors.push(response.response.data.errors);\n      } else {\n        resetForm();\n\n        this.$router.go(-1);\n      }\n    },\n    async triggerVaultDelete() {\n      let vaultId = this.$route.params.id;\n      let response = await api.vault.delete(vaultId);\n\n      if (response instanceof Error) {\n        this.backendErrors.push(response.response.data.errors)\n      } else if (response.status === 204) {\n        this.showModal = false;\n\n        this.$router.go(-1);\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}